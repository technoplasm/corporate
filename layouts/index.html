{{ define "main" }}
<style>
    .gradient-overlay {
        position: fixed;
        inset: 0;
        pointer-events: none;
        z-index: 0;
        opacity: 0.2;
        animation: gradientShift 30s ease-in-out infinite;
    }
    @keyframes gradientShift {
        0%, 100% { background: linear-gradient(135deg, #a090c0 0%, #c0a0b0 100%); }
        33% { background: linear-gradient(135deg, #c0a0b0 0%, #90a0c0 100%); }
        66% { background: linear-gradient(135deg, #90a0c0 0%, #a090c0 100%); }
    }
    .particles {
        position: fixed;
        inset: 0;
        overflow: hidden;
        pointer-events: none;
        z-index: 0;
    }
    .particle {
        position: absolute;
        border-radius: 50%;
        opacity: 0.4;
        animation: float var(--particle-duration, 120s) linear infinite;
        transform-origin: 50vw 50vh;
    }
    @keyframes float {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }
</style>
<div class="gradient-overlay"></div>
<div class="flex-grow flex flex-col relative z-10">
    <div class="flex-grow flex flex-col justify-center items-center text-center px-6 relative">
        <div class="particles" id="particles"></div>
        <script>
            (function() {
                const container = document.getElementById('particles');
                const baseSize = 1920 * 1080;

                // 画面サイズに応じてアニメーション速度を計算
                function calcDuration() {
                    const currentSize = window.innerWidth * window.innerHeight;
                    const ratio = Math.sqrt(currentSize / baseSize);
                    return Math.max(20, Math.min(80, 80 * ratio));
                }

                function updateParticleDuration() {
                    const duration = calcDuration();
                    document.documentElement.style.setProperty('--particle-duration', duration + 's');
                }
                updateParticleDuration();
                window.addEventListener('resize', updateParticleDuration);

                const colors = {
                    h: ['#7c6cae', '#8b7cb8', '#6a5a9e', '#9b8bc8', '#5d4d8e'],
                    e: ['#e8a0b0', '#f0b0c0', '#dca0b0', '#f5c0d0', '#d890a0']
                };
                const count = 20;
                const initialDuration = calcDuration();
                for (let i = 0; i < count; i++) {
                    const el = document.createElement('div');
                    el.className = 'particle';
                    const isH = Math.random() > 0.5;
                    const colorArr = isH ? colors.h : colors.e;
                    const color = colorArr[Math.floor(Math.random() * colorArr.length)];
                    const size = 60 + Math.random() * 150;
                    el.style.width = size + 'px';
                    el.style.height = size + 'px';
                    el.style.left = Math.random() * 100 + '%';
                    el.style.top = Math.random() * 100 + '%';
                    el.style.background = `radial-gradient(circle, ${color} 0%, transparent 70%)`;
                    el.style.animationDelay = -Math.random() * initialDuration + 's';
                    el.style.animationDirection = Math.random() > 0.5 ? 'normal' : 'reverse';
                    container.appendChild(el);
                }
            })();
        </script>
        <div class="hero-container relative z-10" id="heroContainer">
            <h1 class="font-public-sans font-bold text-4xl sm:text-6xl md:text-8xl mb-8 tracking-tight">
                <a href="/" class="text-stencil">Technoplasm</a>
            </h1>
            <p class="text-xl sm:text-2xl md:text-3xl font-medium">
                <span class="text-gray-900">その身体は</span><span class="text-stencil">テクノロジー</span><span class="text-gray-900">で出来ている</span>
            </p>
        </div>
    </div>

    <!-- News Section -->
    <section class="py-16 px-6">
        <div class="max-w-4xl mx-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-2xl font-bold text-slate-800">お知らせ</h2>
                <!-- <a href="/news/" class="text-sm text-slate-600 hover:text-slate-800 transition">すべて見る →</a> -->
            </div>
            <div class="bg-white rounded border border-gray-200 overflow-hidden">
                <div class="max-h-[11rem] overflow-y-auto divide-y divide-gray-100">
                    {{ range first 5 (where .Site.RegularPages "Section" "news") }}
                    <div class="flex items-center px-4 py-3">
                        <time class="text-base text-gray-500 shrink-0 w-36">{{ .Date.Format "2006年1月2日" }}</time>
                        <p class="text-base text-slate-800">{{ .Title }}
                            {{ with .Params.blog }}　<a href="{{ . }}" class="text-sm text-blue-600 hover:text-blue-800">ブログ記事</a>{{ end }}
                        </p>
                    </div>
                    {{ end }}
                </div>
            </div>
        </div>
    </section>
</div>
{{ end }}
