{{ define "head" }}
<style>
    body {
        background-color: #000 !important;
    }

    header {
        background-color: transparent !important;
        border-bottom-color: rgba(255,255,255,0.1) !important;
    }
    header a, header button {
        color: #ccc !important;
    }

    footer {
        background-color: #000 !important;
    }

    .gif-text {
        background-image: none; /* JSで動的に書き換え */
        background-size: cover;
        background-position: center;
        background-attachment: fixed;
        -webkit-background-clip: text;
        -moz-background-clip: text;
        background-clip: text;
        color: transparent;
        -webkit-text-fill-color: transparent;
        text-decoration: none;
    }
</style>
{{ end }}

{{ define "main" }}
<style>
    .gradient-overlay {
        position: fixed;
        inset: 0;
        pointer-events: none;
        z-index: 0;
        opacity: 0.15;
        animation: gradientShift 30s ease-in-out infinite;
    }
    @keyframes gradientShift {
        0%, 100% { background: linear-gradient(135deg, #a090c0 0%, #c0a0b0 100%); }
        33% { background: linear-gradient(135deg, #c0a0b0 0%, #90a0c0 100%); }
        66% { background: linear-gradient(135deg, #90a0c0 0%, #a090c0 100%); }
    }
    .particles {
        position: fixed;
        inset: 0;
        overflow: hidden;
        pointer-events: none;
        z-index: 0;
    }
    .particle {
        position: absolute;
        border-radius: 50%;
        opacity: 0.3;
        animation: float var(--particle-duration, 120s) linear infinite;
        transform-origin: 50vw 50vh;
    }
    @keyframes float {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }
</style>
<div class="gradient-overlay"></div>
<div class="flex-grow flex flex-col relative z-10">
    <div class="flex-grow flex flex-col justify-center items-center text-center px-6 relative">
        <div class="particles" id="particles"></div>
        <script>
            (function() {
                const container = document.getElementById('particles');
                const baseSize = 1920 * 1080;

                function calcDuration() {
                    const currentSize = window.innerWidth * window.innerHeight;
                    const ratio = Math.sqrt(currentSize / baseSize);
                    return Math.max(20, Math.min(80, 80 * ratio));
                }

                function updateParticleDuration() {
                    const duration = calcDuration();
                    document.documentElement.style.setProperty('--particle-duration', duration + 's');
                }
                updateParticleDuration();
                window.addEventListener('resize', updateParticleDuration);

                const colors = {
                    h: ['#7c6cae', '#8b7cb8', '#6a5a9e', '#9b8bc8', '#5d4d8e'],
                    e: ['#e8a0b0', '#f0b0c0', '#dca0b0', '#f5c0d0', '#d890a0']
                };
                const count = 20;
                const initialDuration = calcDuration();
                for (let i = 0; i < count; i++) {
                    const el = document.createElement('div');
                    el.className = 'particle';
                    const isH = Math.random() > 0.5;
                    const colorArr = isH ? colors.h : colors.e;
                    const color = colorArr[Math.floor(Math.random() * colorArr.length)];
                    const size = 60 + Math.random() * 150;
                    el.style.width = size + 'px';
                    el.style.height = size + 'px';
                    el.style.left = Math.random() * 100 + '%';
                    el.style.top = Math.random() * 100 + '%';
                    el.style.background = `radial-gradient(circle, ${color} 0%, transparent 70%)`;
                    el.style.animationDelay = -Math.random() * initialDuration + 's';
                    el.style.animationDirection = Math.random() > 0.5 ? 'normal' : 'reverse';
                    container.appendChild(el);
                }
            })();
        </script>
        <div class="relative z-10">
            <h1 class="font-public-sans font-bold text-6xl sm:text-8xl md:text-[120px] mb-4 tracking-tight leading-tight gif-text">
                Technoplasm
            </h1>
            <p class="text-xl sm:text-2xl md:text-3xl font-medium leading-loose">
                <span class="text-white">その身体は</span><span class="gif-text text-2xl sm:text-3xl md:text-4xl">テクノロジー</span><span class="text-white">で出来ている</span>
            </p>
        </div>
        <script>
            (function() {
                var gifs = [
                    'url(https://media1.giphy.com/media/v1.Y2lkPTc5MGI3NjExdTl4dTdsYXgwYmVqb3p1eGt5cW0wNTZlcjE4dnc5dzc5NXFmeTEwaiZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/5w6wPYD9xGiqDRcfnm/giphy.gif)',
                    'url(https://media1.giphy.com/media/v1.Y2lkPTc5MGI3NjExOTlueXllMmF0YzYxMjY5aHY1b3JpNHJ3NmZpZWgxcnliaTVmbHZtbCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/h6IEWL7c19SS6Yn1FM/giphy.gif)',
                    'url(https://media4.giphy.com/media/v1.Y2lkPTc5MGI3NjExOGliYmcxOWltOHRuZmR2aXdyd3Rsc2V0b3h6aThjMTIzbGU5MmRobCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/RinDK3M9VVPclvxfKo/giphy.gif)',
                    'url(https://media2.giphy.com/media/v1.Y2lkPTc5MGI3NjExcDM2YmR6aHFqMTF1ZnFiYTUwN2k2MjN3ajA5azdlMzM2eWtycHM3biZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/59UXwJA1Wq6ZWgmgAi/giphy.gif)',
                    'url(https://media3.giphy.com/media/v1.Y2lkPTc5MGI3NjExOXM5eGNxYTVuZWZpaDVwaGk4ZTg4ejR6MzJmamVqdW5xdHE4bWZ5ZyZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/GIY4FhXDnT49CamnRn/giphy.gif)',
                    'url(https://media2.giphy.com/media/v1.Y2lkPTc5MGI3NjExcmNlMTBpZzU2MHl6NWIyZ2M1YnN1bGg1ZTJ5eXdqeGFzZmxrOGl2ZyZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/l0IyhNlpfmQtjkuDC/giphy.gif)'
                ];
                var idx = Math.floor(Math.random() * gifs.length);
                var els = document.querySelectorAll('.gif-text');
                for (var i = 0; i < els.length; i++) {
                    els[i].style.backgroundImage = gifs[idx];
                }
                setInterval(function() {
                    idx = (idx + 1) % gifs.length;
                    for (var i = 0; i < els.length; i++) {
                        els[i].style.backgroundImage = gifs[idx];
                    }
                }, 10000);
            })();
        </script>
    </div>

    <!-- News Section -->
    <section class="py-6 px-6">
        <div class="max-w-4xl mx-auto">
            <div class="rounded border border-white/20 overflow-hidden bg-white/10">
                <div class="max-h-[11rem] overflow-y-auto divide-y divide-white/10">
                    {{ range first 5 (where .Site.RegularPages "Section" "news") }}
                    <div class="flex items-center px-4 py-3">
                        <time class="text-base shrink-0 w-36 text-neutral-400">{{ .Date.Format "2006年1月2日" }}</time>
                        <p class="text-base text-neutral-100">{{ .Title }}
                            {{ with .Params.blog }}　<a href="{{ . }}" class="text-sm text-blue-400 hover:text-blue-300">ブログ記事</a>{{ end }}
                        </p>
                    </div>
                    {{ end }}
                </div>
            </div>
        </div>
    </section>
</div>
{{ end }}
